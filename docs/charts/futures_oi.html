<html>
<head><meta charset="utf-8" /></head>
<body>
    <div>                        <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.2.0.min.js" integrity="sha256-iZ2u/oU2wf/vDbl/ChcX93WgbBRSBvUO6N413hDz7xM=" crossorigin="anonymous"></script>                <div id="03b56e8d-aa3e-4743-82ca-e01f0dcba6f1" class="plotly-graph-div" style="height:620px; width:100%;"></div>            <script type="text/javascript">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById("03b56e8d-aa3e-4743-82ca-e01f0dcba6f1")) {                    Plotly.newPlot(                        "03b56e8d-aa3e-4743-82ca-e01f0dcba6f1",                        [{"hovertemplate":"$%{y:,.0f}\u003cextra\u003e\u003c\u002fextra\u003e","line":{"color":"#1a1a1a","width":1.8},"name":"BTC Price","x":["2025-10-22T00:00:00.000000000","2025-10-23T00:00:00.000000000","2025-10-24T00:00:00.000000000","2025-10-25T00:00:00.000000000","2025-10-26T00:00:00.000000000","2025-10-27T00:00:00.000000000","2025-10-28T00:00:00.000000000","2025-10-29T00:00:00.000000000","2025-10-30T00:00:00.000000000","2025-10-31T00:00:00.000000000","2025-11-01T00:00:00.000000000","2025-11-02T00:00:00.000000000","2025-11-03T00:00:00.000000000","2025-11-04T00:00:00.000000000","2025-11-05T00:00:00.000000000","2025-11-06T00:00:00.000000000","2025-11-07T00:00:00.000000000","2025-11-08T00:00:00.000000000","2025-11-09T00:00:00.000000000","2025-11-10T00:00:00.000000000","2025-11-11T00:00:00.000000000","2025-11-12T00:00:00.000000000","2025-11-13T00:00:00.000000000","2025-11-14T00:00:00.000000000","2025-11-15T00:00:00.000000000","2025-11-16T00:00:00.000000000","2025-11-17T00:00:00.000000000","2025-11-18T00:00:00.000000000","2025-11-19T00:00:00.000000000","2025-11-20T00:00:00.000000000"],"y":{"dtype":"f8","bdata":"AAAAYIlK+kAAAACgW9\u002f6QAAAAMCeG\u002ftAAAAAoJtB+0AAAAAgh\u002fL7QAAAAEB13PtAAAAAoMKT+0AAAADgdN76QAAAAMAYcfpAAAAAoEK\u002f+kAAAABAAN\u002f6QAAAAAD6AvtAAAAAYDgD+kAAAABgaM34QAAAAGA9XflAAAAAoFS7+EAAAACAxjz5QAAAAOCh+PhAAAAAQPqQ+UAAAACAyeD5QAAAAIBXJflAAAAAAPPR+EAAAADgF1f4QAAAAKDcC\u002fdAAAAAYNJT90AAAABAEf72QAAAAADee\u002fZAAAAAAE6x9kAAAADgn1T2QAAAAGB+JvVA"},"type":"scatter","xaxis":"x","yaxis":"y"},{"hovertemplate":"$%{y:,.0f}\u003cextra\u003e\u003c\u002fextra\u003e","line":{"color":"#2962FF","dash":"dash","width":1.5},"name":"200D MA","x":["2025-10-22T00:00:00.000000000","2025-10-23T00:00:00.000000000","2025-10-24T00:00:00.000000000","2025-10-25T00:00:00.000000000","2025-10-26T00:00:00.000000000","2025-10-27T00:00:00.000000000","2025-10-28T00:00:00.000000000","2025-10-29T00:00:00.000000000","2025-10-30T00:00:00.000000000","2025-10-31T00:00:00.000000000","2025-11-01T00:00:00.000000000","2025-11-02T00:00:00.000000000","2025-11-03T00:00:00.000000000","2025-11-04T00:00:00.000000000","2025-11-05T00:00:00.000000000","2025-11-06T00:00:00.000000000","2025-11-07T00:00:00.000000000","2025-11-08T00:00:00.000000000","2025-11-09T00:00:00.000000000","2025-11-10T00:00:00.000000000","2025-11-11T00:00:00.000000000","2025-11-12T00:00:00.000000000","2025-11-13T00:00:00.000000000","2025-11-14T00:00:00.000000000","2025-11-15T00:00:00.000000000","2025-11-16T00:00:00.000000000","2025-11-17T00:00:00.000000000","2025-11-18T00:00:00.000000000","2025-11-19T00:00:00.000000000","2025-11-20T00:00:00.000000000"],"y":{"dtype":"f8","bdata":"XI\u002fC1QJn+kBSuB5B93D6QMP1KCTnevpAUrgeufSF+kCkcD2a7I\u002f6QOxRuA60mvpAH4XrKfCj+kApXI+erav6QD0K10Nfs\u002fpAH4XrXTC7+kAAAAD4b8P6QB+F623Ay\u002fpApHA9koTS+kB7FK6\u002f39f6QFyPwgXC3fpAZmZmLszi+kDhehR2wOf6QB+F662D6vpAZmZmUvXt+kB7FK6LufH6QAAAALRP9PpAj8L1AIH2+kBmZmZqXPj6QIXrUfAt+PpAZmZmFpP4+kAzMzOrkPj6QOxRuMow9\u002fpA16Nw5fP1+kCPwvXUkfT6QHE9Chsr8vpA"},"type":"scatter","xaxis":"x","yaxis":"y"},{"fill":"tozeroy","fillcolor":"rgba(218, 165, 32, 0.08)","hovertemplate":"$%{y:,.0f}\u003cextra\u003e\u003c\u002fextra\u003e","line":{"color":"#DAA520","width":1.8},"name":"OI (USD)","x":["2025-10-22T00:00:00.000000000","2025-10-23T00:00:00.000000000","2025-10-24T00:00:00.000000000","2025-10-25T00:00:00.000000000","2025-10-26T00:00:00.000000000","2025-10-27T00:00:00.000000000","2025-10-28T00:00:00.000000000","2025-10-29T00:00:00.000000000","2025-10-30T00:00:00.000000000","2025-10-31T00:00:00.000000000","2025-11-01T00:00:00.000000000","2025-11-02T00:00:00.000000000","2025-11-03T00:00:00.000000000","2025-11-04T00:00:00.000000000","2025-11-05T00:00:00.000000000","2025-11-06T00:00:00.000000000","2025-11-07T00:00:00.000000000","2025-11-08T00:00:00.000000000","2025-11-09T00:00:00.000000000","2025-11-10T00:00:00.000000000","2025-11-11T00:00:00.000000000","2025-11-12T00:00:00.000000000","2025-11-13T00:00:00.000000000","2025-11-14T00:00:00.000000000","2025-11-15T00:00:00.000000000","2025-11-16T00:00:00.000000000","2025-11-17T00:00:00.000000000","2025-11-18T00:00:00.000000000","2025-11-19T00:00:00.000000000","2025-11-20T00:00:00.000000000"],"y":{"dtype":"f8","bdata":"TC88XFK4AELkFLFDpG7+QWndg9laZP9Bg8A28f0SAELGi\u002fp8EnwAQolxmMAibwFC6Fkh5XWTAEK504cFbd\u002f\u002fQaR1FS55CwBCjZcO1BRr\u002f0GjI0mIGPv\u002fQS2HBEL2b\u002f9BeUORsShL\u002f0HIB6dYSbr+Qb6fIzpBnP5BDkN1OPE5AEIdyaU+fQ7\u002fQVx+VpgstQBCuK+gNOENAEK30bxUSasAQljKMSpIJAFCbT1HV5JuAELvOES+EkYAQiJbjRq1AQFCXI8axxxyAEIaUUGC7j0BQntyhc1dUgFC0NU2NMpkAUJPQFmYoEwBQv0cnoXdLwFC"},"type":"scatter","xaxis":"x2","yaxis":"y2"}],                        {"template":{"data":{"barpolar":[{"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"white","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"#C8D4E3","linecolor":"#C8D4E3","minorgridcolor":"#C8D4E3","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"#C8D4E3","linecolor":"#C8D4E3","minorgridcolor":"#C8D4E3","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scattermap":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermap"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"white","showlakes":true,"showland":true,"subunitcolor":"#C8D4E3"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"white","polar":{"angularaxis":{"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":""},"bgcolor":"white","radialaxis":{"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"},"yaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"},"zaxis":{"backgroundcolor":"white","gridcolor":"#DFE8F3","gridwidth":2,"linecolor":"#EBF0F8","showbackground":true,"ticks":"","zerolinecolor":"#EBF0F8"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""},"baxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""},"bgcolor":"white","caxis":{"gridcolor":"#DFE8F3","linecolor":"#A2B1C6","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":"","title":{"standoff":15},"zerolinecolor":"#EBF0F8","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"#EBF0F8","linecolor":"#EBF0F8","ticks":"","title":{"standoff":15},"zerolinecolor":"#EBF0F8","zerolinewidth":2}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"matches":"x2","showticklabels":false},"yaxis":{"anchor":"x","domain":[0.46640000000000004,1.0],"type":"log","tickformat":"$,.0f","dtick":1,"showgrid":true,"gridcolor":"#f0f0f0","gridwidth":1},"xaxis2":{"anchor":"y2","domain":[0.0,1.0],"rangeslider":{"visible":false}},"yaxis2":{"anchor":"x2","domain":[0.0,0.3864],"tickformat":"$,.0s","showgrid":true,"gridcolor":"#f0f0f0","gridwidth":1},"shapes":[{"fillcolor":"rgba(220, 53, 69, 0.08)","line":{"width":0},"type":"rect","x0":0,"x1":1,"xref":"x2 domain","y0":9288708226.10885,"y1":14039811100.583157,"yref":"y2"},{"fillcolor":"rgba(40, 167, 69, 0.08)","line":{"width":0},"type":"rect","x0":0,"x1":1,"xref":"x2 domain","y0":0,"y1":8327862906.36938,"yref":"y2"}],"annotations":[{"font":{"color":"#999","size":8},"showarrow":false,"text":"Data: Binance","x":0.01,"xanchor":"left","xref":"paper","y":0.01,"yref":"paper","yshift":8,"yanchor":"bottom","opacity":0.6},{"font":{"color":"#333","size":12},"showarrow":false,"text":"\u003cspan style='font-size:16px; font-weight:bold'\u003e\u2501\u003c\u002fspan\u003e BTC Price   \u003cspan style='font-size:16px; color:#2962FF; font-weight:bold'\u003e- - -\u003c\u002fspan\u003e 200D MA   \u003cspan style='font-size:16px; color:#DAA520; font-weight:bold'\u003e\u2501\u003c\u002fspan\u003e OI (USD)","x":0.5,"xanchor":"center","xref":"paper","y":1.0,"yref":"paper","yshift":-8,"yanchor":"bottom","bgcolor":"rgba(255, 255, 255, 0.9)","bordercolor":"#e5e5e5","borderwidth":1,"borderpad":6}],"title":{"pad":{"b":40},"text":"\u003cb style='font-size:16px'\u003eBTC Price (log) & Futures Open Interest (USD)\u003c\u002fb\u003e\u003cbr\u003e\u003cspan style='font-size:11px; color:#666'\u003ePrice Trend Regime (Price vs 200D MA)\u003c\u002fspan\u003e","y":0.98,"x":0.5,"xanchor":"center","yanchor":"top"},"margin":{"l":60,"r":40,"t":110,"b":50},"height":620,"hovermode":"x unified","showlegend":false,"plot_bgcolor":"white"},                        {"displayModeBar": false, "responsive": true}                    )                };            </script>        </div>

    <script>
    (function() {
        // Enable y-axis auto-scaling when x-axis range changes (including box select/zoom)
        function setupYAxisAutoScale() {
            // Find all plotly graph divs
            var plotlyDivs = document.querySelectorAll('.plotly-graph-div');
            
            plotlyDivs.forEach(function(gd) {
                if (!gd || !gd._fullLayout) {
                    // Retry if Plotly not ready
                    setTimeout(setupYAxisAutoScale, 200);
                    return;
                }
                
                // Track previous x-axis range
                var prevXRange = null;
                var updateTimeout = null;
                var isUpdatingYAxis = false;  // Flag to prevent recursive updates
                
                // Function to force y-axis autorange update
                function forceYAxisAutorange() {
                    // Prevent recursive calls
                    if (isUpdatingYAxis) {
                        return;
                    }
                    
                    if (updateTimeout) {
                        clearTimeout(updateTimeout);
                    }
                    
                    updateTimeout = setTimeout(function() {
                        try {
                            // Get current x-axis state
                            var xaxis = gd._fullLayout.xaxis;
                            var currentXRange = xaxis.range && !xaxis.autorange ? xaxis.range : null;
                            
                            // Check if x-axis range actually changed
                            var shouldUpdate = false;
                            if (currentXRange && prevXRange) {
                                // Compare ranges (allow 1ms difference for floating point)
                                if (Math.abs(currentXRange[0] - prevXRange[0]) > 1 || 
                                    Math.abs(currentXRange[1] - prevXRange[1]) > 1) {
                                    shouldUpdate = true;
                                }
                            } else if (currentXRange !== prevXRange) {
                                shouldUpdate = true;
                            }
                            
                            if (shouldUpdate || currentXRange) {
                                // Update previous range
                                prevXRange = currentXRange ? [currentXRange[0], currentXRange[1]] : null;
                                
                                // Set flag to prevent recursive updates
                                isUpdatingYAxis = true;
                                
                                // Force y-axis autorange - use a single relayout call
                                Plotly.relayout(gd, {
                                    'yaxis.autorange': true
                                }).then(function() {
                                    // Reset flag after a short delay to allow layout to settle
                                    setTimeout(function() {
                                        isUpdatingYAxis = false;
                                    }, 100);
                                }).catch(function(err) {
                                    // Reset flag on error
                                    isUpdatingYAxis = false;
                                });
                            }
                        } catch(e) {
                            console.error('Error updating y-axis autorange:', e);
                            isUpdatingYAxis = false;
                        }
                    }, 100);
                }
                
                // Listen for relayout events, but only respond to user-initiated x-axis changes
                gd.on('plotly_relayout', function(eventData) {
                    // Skip if we're currently updating y-axis (to prevent recursion)
                    if (isUpdatingYAxis) {
                        return;
                    }
                    
                    // Check what changed in this event
                    var isXAxisChange = false;
                    var isYAxisRangeChange = false;
                    
                    for (var key in eventData) {
                        // Check for x-axis range changes (user zoom/box select)
                        if (key.indexOf('xaxis.range') === 0 || key === 'xaxis.autorange') {
                            isXAxisChange = true;
                        }
                        // Check for y-axis RANGE changes (not autorange, which is our own update)
                        if (key.indexOf('yaxis.range') === 0) {
                            isYAxisRangeChange = true;
                        }
                    }
                    
                    // If both x and y ranges changed, user did a box-select, so DON'T auto-scale
                    if (isXAxisChange && isYAxisRangeChange) {
                        // Box-select: user manually set both axes, respect their selection
                        var xaxis = gd._fullLayout.xaxis;
                        var currentXRange = xaxis && xaxis.range && !xaxis.autorange ? xaxis.range : null;
                        if (currentXRange) {
                            prevXRange = [currentXRange[0], currentXRange[1]];
                        }
                        return;
                    }
                    
                    // If only x-axis changed, check if the range actually changed
                    if (isXAxisChange) {
                        var xaxis = gd._fullLayout.xaxis;
                        var currentXRange = xaxis && xaxis.range && !xaxis.autorange ? xaxis.range : null;
                        
                        // Check if range actually changed (to prevent duplicate auto-scale calls)
                        var rangeChanged = false;
                        if (currentXRange && prevXRange) {
                            if (Math.abs(currentXRange[0] - prevXRange[0]) > 1 || 
                                Math.abs(currentXRange[1] - prevXRange[1]) > 1) {
                                rangeChanged = true;
                            }
                        } else if (currentXRange !== prevXRange) {
                            rangeChanged = true;
                        }
                        
                        // Only trigger auto-scale if range actually changed
                        if (rangeChanged && currentXRange) {
                            prevXRange = [currentXRange[0], currentXRange[1]];
                            forceYAxisAutorange();
                        }
                    }
                });
                
                // Use afterplot event as a backup - it fires after all rendering is complete
                // This is safer because it won't trigger during our own relayout calls
                gd.on('plotly_afterplot', function() {
                    // Skip if we're updating
                    if (isUpdatingYAxis) {
                        return;
                    }
                    
                    // Check if x-axis has a manual range (indicating zoom/box select)
                    var xaxis = gd._fullLayout.xaxis;
                    var yaxis = gd._fullLayout.yaxis;
                    
                    if (xaxis && xaxis.range && !xaxis.autorange) {
                        // If y-axis is also manually set (not autorange), this was a box-select
                        // Don't override user's manual y-axis selection
                        if (yaxis && yaxis.range && !yaxis.autorange) {
                            // Box-select: both axes manually set, just update tracking
                            var currentXRange = [xaxis.range[0], xaxis.range[1]];
                            if (!prevXRange || 
                                Math.abs(currentXRange[0] - prevXRange[0]) > 1 || 
                                Math.abs(currentXRange[1] - prevXRange[1]) > 1) {
                                prevXRange = [currentXRange[0], currentXRange[1]];
                            }
                            return;
                        }
                        
                        // Only x-axis manually set: normal zoom, apply auto-scale
                        var currentXRange = [xaxis.range[0], xaxis.range[1]];
                        
                        // Check if range actually changed
                        var rangeChanged = false;
                        if (prevXRange) {
                            if (Math.abs(currentXRange[0] - prevXRange[0]) > 1 || 
                                Math.abs(currentXRange[1] - prevXRange[1]) > 1) {
                                rangeChanged = true;
                            }
                        } else {
                            rangeChanged = true;
                        }
                        
                        if (rangeChanged) {
                            prevXRange = [currentXRange[0], currentXRange[1]];
                            forceYAxisAutorange();
                        }
                    }
                });
                
                // Initialize previous range
                var xaxis = gd._fullLayout.xaxis;
                if (xaxis && xaxis.range && !xaxis.autorange) {
                    prevXRange = [xaxis.range[0], xaxis.range[1]];
                }
            });
        }
        
        // Setup when page is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', function() {
                setTimeout(setupYAxisAutoScale, 500);
            });
        } else {
            // DOM already loaded, wait for Plotly to initialize
            setTimeout(setupYAxisAutoScale, 1000);
        }
    })();
    </script>
    
</body>
</html>